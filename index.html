<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DarkroomJS</title>
  <link rel="stylesheet" href="./assets/css/page.css">
  <link rel="stylesheet" href="./assets/css/webfont.css">
  <link rel="stylesheet" href="./assets/css/darkroom.css">
</head>
<body>
  <header id="header">
    <a href="https://github.com/MattKetmo/darkroomjs">
      <img style="position: absolute; top: 0; right: 0; border: 0;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"
        alt="Fork on GitHub">
    </a>

    <div class="container">
      <h1>Darkroom<strong>JS</strong></h1>
      <p class="hero">
        Quick image editing via javascript and HTML5 canvas
      </p>
    </div>
  </header>

  <div id="content">
    <div class="container">
      <figure class="image-container">
        <!-- You may add attribute crossOrigin="anonymous" for CORS -->
        <img src="./images/domokun.jpg" alt="DomoKun" id="target">

        <figcaption class="image-meta">
          <a target="_blank" href="http://www.flickr.com/photos/bentorode/5176910387/">
            Â©
            <strong class="image-meta-title">DomoKun</strong>
            by
            <em class="image-meta-author">Ben Torode</em>
          </a>
        </figcaption>
      </figure>
    </div>
  </div>

  <script src="./assets/js/fabric.js"></script>
  <script src="./src/darkroom.js"></script>
  <script src="./src/plugins/darkroom.history.js"></script>
  <script src="./src/plugins/darkroom.crop.js"></script>
  <script src="./src/plugins/darkroom.rotate.js"></script>
  <script src="./src/plugins/darkroom.save.js"></script>

  <script>
    var dkrm = new Darkroom('#target', {
      // Size options
      minWidth: 100,
      minHeight: 100,
      maxWidth: 500,
      maxHeight: 500,

      plugins: {
        //save: false,
        crop: {
          minHeight: 100,
          minWidth: 100,
          ratio: 1
        }
      },
      init: function() {
        var cropPlugin = this.getPlugin('crop');
        cropPlugin.selectZone(170, 25, 300, 300);
        //cropPlugin.requireFocus();
        return;
        this.addEventListener('image:change', function() {
          cropPlugin.requireFocus();
        });
      }
    });
  </script>
</body>
</html>
